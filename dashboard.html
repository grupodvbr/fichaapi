<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>CB SYSTEMS¬Æ</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00c2b8">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800;900&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
:root{
  --bg:#0b1220; --card:#020617; --grid:#1e293b;
  --text:#e5e7eb; --muted:#94a3b8;
  --accent:#22c55e; --gold:#f59e0b; --danger:#ef4444;
  --radius:22px; --shadow:0 30px 90px rgba(0,0,0,.55);
}
*{box-sizing:border-box}
html,body{
  margin:0; width:100%; height:100%;
  font-family:Inter,system-ui,Arial,sans-serif;
  color:var(--text);
  overflow:hidden;
}

.login-hero.hero-image{
  position:fixed; inset:0;
  background: radial-gradient(1200px 600px at 10% -10%, #0b1220 0%, #020617 60%);
}
.hero-overlay{
  width:100%; height:100%;
  background:
    linear-gradient(180deg, rgba(2,6,23,.25), rgba(2,6,23,.45)),
    radial-gradient(800px 400px at 20% 0%, rgba(34,197,94,.15), transparent 60%);
  padding:14px 24px;
}
.hero-frame{
  max-width: min(96vw, 1400px);
  height: calc(100vh - 96px); /* abaixo do t√≠tulo/bot√µes */
  margin: 14px auto 0;
  border-radius: 28px;          /* voc√™ j√° ajustou isso üëç */
  overflow: hidden;            /* respeita as bordas */
  box-shadow:
    0 30px 90px rgba(0,0,0,.65),
    inset 0 0 0 1px rgba(255,255,255,.06);
  background: #020617;
  position: relative;
}

.hero-image-bg{
  position:absolute; inset:0;
  background: url("imgmockup-app.png") center center / contain no-repeat; /* <- caber inteiro */
}
.hero-frame{
  max-width: 96vw;
  height: calc(100vh - 110px);
  margin: 14px auto 0;
  border-radius: 22px;
  overflow: hidden;                 /* corta bordas da imagem */
  box-shadow:
    0 30px 90px rgba(0,0,0,.65),
    inset 0 0 0 1px rgba(255,255,255,.06);
  background: #020617;
  position: relative;
}

.hero-frame::before{
  content:"";
  position:absolute; inset:0;
  background:
    linear-gradient(180deg, rgba(2,6,23,.10), rgba(2,6,23,.25)),
    radial-gradient(800px 400px at 20% 0%, rgba(34,197,94,.12), transparent 60%);
  pointer-events:none;
}

.hero-image-bg{
  position:absolute; inset:0;
  background: url("imgmockup-app.png") center center / cover no-repeat;
  transform: scale(1.01); /* evita ‚Äúborda branca‚Äù */
}
  
.hero-top{
  max-width:1400px; margin:0 auto;
  display:flex; align-items:center; justify-content:space-between; gap:20px;
}
.hero-title h1{
  margin:0;
  font-size:28px;
  font-weight:900;
  letter-spacing:-.01em;
  color:#ffffff;                 /* for√ßa branco puro */
  text-shadow:
    0 2px 12px rgba(0,0,0,.55),  /* sombra escura p/ contraste */
    0 0 22px rgba(34,197,94,.25); /* glow verde suave premium */
}
.hero-title p{
  margin:4px 0 0;
  color:#cbd5e1;
  font-size:13px;
  font-weight:600;
}.hero-actions{display:flex; gap:12px; flex-wrap:wrap}
.btn{
  border-radius:999px;
  padding:9px 14px;
  font-weight:800;
  font-size:12px;
  letter-spacing:.04em;
}
.btn.primary{
  border:none; color:#022c22;
  background:linear-gradient(135deg,#22c55e,#16a34a);
  box-shadow:0 16px 44px rgba(34,197,94,.45);
}

/* MODAL LOGIN */
.modal{
  position:fixed; inset:0; display:none; place-items:center;
  background:rgba(2,6,23,.7); backdrop-filter: blur(8px); z-index:999;
}
.modal.open{display:grid}
.modal-box{
  width:100%; max-width:420px;
  background:#020617; border:1px solid var(--grid);
  border-radius:26px; padding:26px; box-shadow:var(--shadow); position:relative;
}
.modal-box h2{margin:0 0 8px; font-weight:900}
.modal-box p{color:var(--muted); margin:0 0 12px}
.field label{font-size:12px; font-weight:800; letter-spacing:.08em; color:#cbd5f5}
.field input{
  width:100%; margin-top:6px; padding:14px 16px;
  border-radius:14px; border:1px solid var(--grid);
  background:#0b1220; color:#fff; outline:none;
}
.actions{margin-top:16px; display:flex; gap:10px}
.close{position:absolute; right:14px; top:12px; cursor:pointer; font-weight:900; opacity:.8}

/* APP */
.app{display:grid; grid-template-columns:88px 1fr; height:100vh; display:none}
.sidebar{
  background:linear-gradient(180deg,#00c2b8,#00a6a0);
  display:flex; flex-direction:column; align-items:center; padding:22px 0; gap:18px
}
.icon{width:48px;height:48px;border-radius:16px;background:rgba(255,255,255,.35);display:grid;place-items:center;cursor:pointer;transition:.2s}
.icon:hover{transform:scale(1.08)}
.icon.active{background:#fff;box-shadow:0 0 0 4px rgba(255,255,255,.55)}
.glyph{width:22px;height:22px;position:relative}
.glyph.home::before{content:"";position:absolute;inset:0;background:#00a6a0;clip-path:polygon(50% 0,100% 40%,100% 100%,0 100%,0 40%);border-radius:4px}
.glyph.doc::before{content:"";position:absolute;inset:0;background:#00a6a0;border-radius:4px}
.glyph.doc::after{content:"";position:absolute;top:4px;left:4px;right:4px;height:3px;background:#e6f7f7;box-shadow:0 6px 0 #e6f7f7,0 12px 0 #e6f7f7}
.glyph.chart::before{content:"";position:absolute;bottom:0;left:0;width:5px;height:14px;background:#00a6a0;box-shadow:8px -6px 0 #00a6a0,16px -2px 0 #00a6a0}
.glyph.settings{border:3px solid #00a6a0;border-radius:50%}
.glyph.settings::after{content:"";position:absolute;inset:6px;border:2px solid #00a6a0;border-radius:50%}
.glyph.box::before{content:"";position:absolute;inset:0;border:3px solid #00a6a0;border-radius:4px}
.glyph.box::after{content:"";position:absolute;inset:6px;border-top:3px solid #00a6a0}
.glyph.media{
  position:relative;
}
.glyph.media::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:6px;
  border:3px solid #00a6a0;
}
.glyph.media::after{
  content:"";
  position:absolute;
  left:6px; right:6px; bottom:6px; height:3px;
  background:#00a6a0;
  box-shadow:
    0 -6px 0 #00a6a0,
    0 -12px 0 #00a6a0;
}




  
.main{display:flex;flex-direction:column;height:100%}
.header{
  height:68px;
  background:#e6f7f7;   /* fundo claro */
  color:#020617;        /* texto escuro */
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 24px;
  font-weight:800;
}

#pageTitle{
  color:#020617;        /* for√ßa o t√≠tulo ficar vis√≠vel */
}.logout{background:#ef4444;border:none;padding:8px 14px;border-radius:12px;color:#fff;font-weight:700;cursor:pointer}
iframe{flex:1;width:100%;border:0;background:#fff}

@media(max-width:900px){
  .hero-top{flex-direction:column; align-items:flex-start}
  .hero-title h1{font-size:32px}
}
</style>
</head>

<body>

<section id="loginHero" class="login-hero hero-image">
  <div class="hero-overlay">
    <div class="hero-top">
      <div class="hero-title">
        <h1>CB SYSTEMS¬Æ</h1>
        <p>Sistema de Ficha T√©cnica & CMV</p>
      </div>
      <div class="hero-actions">
        <a class="btn primary" href="https://wa.me/5577998253249" target="_blank">Solicitar or√ßamento</a>
        <button class="btn" onclick="openLogin()">Entrar</button>
      </div>
    </div>

    <!-- IMAGEM EM FRAME (n√£o corta e n√£o ultrapassa a tela) -->
    <div class="hero-frame">
      <div class="hero-image-bg"></div>
    </div>
  </div>
</section>

<!-- MODAL LOGIN -->
<div id="modalLogin" class="modal">
  <div class="modal-box">
    <span class="close" onclick="closeLogin()">‚úï</span>
    <h2>Entrar no sistema</h2>
    <p>Use seu e-mail e senha para acessar.</p>
    <div class="field">
      <label>Email</label>
      <input id="email" type="email" placeholder="seu@email.com">
    </div>
    <div class="field" style="margin-top:10px">
      <label>Senha</label>
      <input id="senha" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
    </div>
    <div class="actions">
      <button class="btn primary" onclick="login()">Entrar</button>
      <button class="btn" onclick="closeLogin()">Cancelar</button>
    </div>
  </div>
</div>

<!-- APP -->
<div id="app" class="app">
<aside class="sidebar">
  <div class="icon active" onclick="openPage('home.html',this)"><span class="glyph home"></span></div>
  <div class="icon" onclick="openPage('fichatecnica.html',this)"><span class="glyph doc"></span></div>
  <div class="icon" onclick="openPage('ingredientes.html',this)"><span class="glyph box"></span></div>
  <div class="icon" onclick="openPage('analiseficha.html',this)"><span class="glyph chart"></span></div>
  <div class="icon" onclick="openPage('config.html',this)"><span class="glyph settings"></span></div>

  <!-- Excel Ingredientes -->
  <div class="icon" onclick="openPage('ingredientesexcell.html',this)">
    <span class="glyph doc"></span>
  </div>

  <!-- M√≠dias -->
  <div class="icon" onclick="openPage('midias.html',this)">
    <span class="glyph media"></span>
  </div>

  <!-- Relat√≥rios -->
  <div class="icon" onclick="openPage('relatorios.html',this)">
    <span class="glyph chart"></span>
  </div>
</aside>

  <div class="main">
    <div class="header">
      <span id="pageTitle">CB SYSTEMS¬Æ - Dashboard</span>
      <button class="logout" onclick="logout()">Sair</button>
    </div>
    <iframe id="frame" src=""></iframe>
  </div>
</div>

<script>
const sb = supabase.createClient(
  "https://dxkszikemntfusfyrzos.supabase.co",
  "sb_publishable_NNFvdfSXgOdGGVcSbphbjQ_brC3_9ed"
);



function openLogin(){ document.getElementById("modalLogin").classList.add("open"); }
function closeLogin(){ document.getElementById("modalLogin").classList.remove("open"); }

async function login(){
  const { error } = await sb.auth.signInWithPassword({ email: email.value, password: senha.value });
  if(error){ alert(error.message); return; }
  await sb.auth.getSession();
  closeLogin();
  showApp();
  openPage("home.html", document.querySelector(".icon"));
}

async function logout(){
  await sb.auth.signOut();
  location.reload();
}

function showApp(){
  document.getElementById("loginHero").style.display = "none";
  document.getElementById("app").style.display = "grid";
}

function openPage(page, el){
  localStorage.setItem("cb_page", page);
  document.getElementById("frame").src = page;
  document.querySelectorAll(".icon").forEach(i=>i.classList.remove("active"));
  el.classList.add("active");

const titles = {
  "home.html": "CB SYSTEMS¬Æ - Dashboard",
  "fichatecnica.html": "CB SYSTEMS¬Æ - Fichas T√©cnicas",
  "ingredientes.html": "CB SYSTEMS¬Æ - Ingredientes",
  "analiseficha.html": "CB SYSTEMS¬Æ - An√°lise de Fichas",
  "config.html": "CB SYSTEMS¬Æ - An√°lise financeira",
  "ingredientesexcell.html": "CB SYSTEMS¬Æ - Excel de Ingredientes", // ‚úÖ corrigido
  "midias.html": "CB SYSTEMS¬Æ - M√≠dias do Card√°pio",
  "relatorios.html": "CB SYSTEMS¬Æ - Relat√≥rios"
};

document.getElementById("pageTitle").innerText = titles[page] || "CB SYSTEMS¬Æ";
}
async function check(){
  const { data } = await sb.auth.getSession();
  if(data.session){
    showApp();
    const page = localStorage.getItem("cb_page") || "home.html";
    const icon = [...document.querySelectorAll(".icon")]
      .find(i => i.getAttribute("onclick")?.includes(page)) || document.querySelector(".icon");
    openPage(page, icon);
  }
}

check();
window.openLogin = openLogin;
window.closeLogin = closeLogin;





  
</script>

</body>
</html>
